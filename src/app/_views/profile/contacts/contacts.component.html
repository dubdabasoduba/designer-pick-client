<!--
  ~ Copyright (c) 2019. The content in this file is Protected by the copyright laws of kenya and owned by Re.Kast Limited.
  ~ Reproducing it in any way or using it without permission from Re.Kast Limited will be a violation of kenyan copyrights law.
  ~ This may be subject to prosecution according to the kenyan law
  -->
<app-navigation></app-navigation>
<div class="content content-fixed bd-b">
	<div class="container pd-x-0 pd-lg-x-10 pd-xl-x-0">
		<div class="d-sm-flex align-items-center justify-content-between">
			<div>
				<nav aria-label="breadcrumb">
					<ol class="breadcrumb breadcrumb-style1 mg-b-10">
						<li class="breadcrumb-item"><a
								routerLink="/profile/{{personId}}">Profile</a></li>
						<li aria-current="page" class="breadcrumb-item active">My contacts</li>
					</ol>
				</nav>
				<h4 class="mg-b-0">My contacts</h4>
			</div>
		</div>
	</div><!-- container -->
</div><!-- content -->
<div class="content">
	<div class="container pd-x-0 pd-lg-x-10 pd-xl-x-0 mg-b-25-f">
		<div class="media d-block d-lg-flex">
			<div class="profile-sidebar pd-lg-r-25">
				<div class="row">
					<div class="col-sm-12 col-md-12 col-lg-12 align-content-center">
						<div class="avatar avatar-xxl avatar-online">
							<img alt="{{person.name}}" class="rounded-circle"
							     src="assets/img/profile-image.png">
						</div>
					</div><!-- col -->
					<div class="col-sm-8 col-md-7 col-lg mg-t-20 mg-sm-t-0 mg-lg-t-25">
						<h5 class="mg-b-2 tx-spacing--1">{{person.name}}</h5>
						<p class="tx-color-03 mg-b-25">@{{person.username}}</p>
						<div class="row">
							<div class="col-md-12">
								<div class="d-flex mg-b-25">
									<a [queryParams]="{returnUrl:returnUrl}"
									   class="btn btn-xs btn-outline-secondary flex-fill"
									   routerLink="/profile/update/{{person.uuid}}"><i
											class="fas fa-user-edit"></i>&nbsp;Edit
										Profile</a>
								</div>
							</div>
						</div>
						
						<div class="d-flex">
							<div class="profile-skillset flex-fill">
								<h4>1.4k</h4>
								<label>Participated</label>
							</div>
							<div class="profile-skillset flex-fill">
								<h4>2.8k</h4>
								<label>Won</label>
							</div>
						</div>
					</div><!-- col -->
					<div class="col-sm-6 col-md-5 col-lg mg-t-40">
						<label class="tx-sans tx-10 tx-semibold tx-uppercase tx-color-01 tx-spacing-1 mg-b-15">Contact
							Information</label>
						<ul class="list-unstyled profile-info-list">
							<li><i data-feather="phone"></i> <a>{{person.phone_number}}</a></li>
							<li><i data-feather="mail"></i> <a>{{person.email}}</a></li>
						</ul>
					</div><!-- col -->
					<div class="col-sm-6 col-md-5 col-lg mg-t-40">
						<label class="tx-sans tx-10 tx-semibold tx-uppercase tx-color-01 tx-spacing-1 mg-b-15">Explore</label>
						<nav class="nav nav-classic tx-13">
							<a class="nav-link" routerLink="/designers"><i
									data-feather="users"></i><span>Designers</span></a>
							<a class="nav-link" routerLink="/contests"><i
									data-feather="calendar"></i> <span>Contests</span></a>
						</nav>
					</div><!-- col -->
				</div><!-- row -->
			
			</div><!-- profile-sidebar -->
			<div class="media-body mg-t-40 mg-lg-t-0 pd-lg-x-10">
				<div class="row">
					<div class="col-lg-12 col-xl-12">
						<fieldset class="form-fieldset">
							<legend>Add&nbsp;|Edit&nbsp;Contact</legend>
							<form #f="ngForm" (ngSubmit)="f.form.valid && addEditContact()"
							      novalidate>
								<div class="form-row">
									<div class="form-group col-lg-4">
										<label>Email Addres:&nbsp;<span
												class="tx-danger">*</span></label>
										<input [(ngModel)]="model.email" class="form-control"
										       data-error="Subject field is required"
										       id="email" name="email"
										       placeholder="Please give the email address"
										       required="" type="email">
									</div>
									<div class="form-group col-lg-4">
										<label>Location:&nbsp;<span
												class="tx-danger">*</span></label>
										<input [(ngModel)]="model.location"
										       autocomplete="off" class="form-control"
										       data-error="Subject field is required" id="location"
										       name="location"
										       placeholder="Please give the location"
										       required="" type="text">
									</div>
									<div class="form-group col-lg-4">
										<label>Phone Number:&nbsp;</label>
										<input [(ngModel)]="model.phone_number" autocomplete="off"
										       class="form-control"
										       id="phone_number"
										       name="phone_number"
										       placeholder="Please give the phone number"
										       type="text">
									</div>
								</div>
								<div class="form-row">
									<div class="form-group col-md-5">
										<div class="custom-control custom-switch">
											<input [(ngModel)]="model.is_main"
											       class="custom-control-input"
											       id="is_main" name="is_active"
											       type="checkbox">
											<label class="custom-control-label" for="is_main">Is
												main
												contact?</label>
										</div>
									</div>
									<div class="form-group col-md-5">
										<div class="custom-control custom-switch">
											<input [(ngModel)]="model.is_active"
											       class="custom-control-input"
											       id="is_active" name="is_active"
											       type="checkbox">
											<label class="custom-control-label" for="is_active">Deactivate/Activate
												contact</label>
										</div>
									</div>
									<div class="form-group col-md-2">
										<button *ngIf="contactId == null && contactId == undefined"
										        class="btn btn-primary btn-block">Create contact
										</button>
										<button *ngIf="contactId != null && contactId != undefined"
										        class="btn btn-primary btn-block">Update contact
										</button>
									</div>
								</div>
							</form>
						</fieldset>
					</div><!-- col -->
				</div><!-- row -->
				<br/>
				<br/>
				<div class="row">
					<div class="col-lg-12 col-xl-12">
						<div class="row row-md mg-b-25 pd-l-20-f pd-r-20-f">
							<div class="table-responsive">
								<table class="table table-striped table-hover table-md mg-b-0"
								       id="user_contact_table">
									<thead class="thead-dark">
									<tr>
										<th class="text-center" scope="col">#</th>
										<th scope="col">Email Address</th>
										<th scope="col">Phone Number</th>
										<th scope="col">Location</th>
										<th class="text-center" scope="col">Is Main Contact?</th>
										<th class="text-center" scope="col">Is Active</th>
										<th class="text-center" scope="col">Actions</th>
									</tr>
									</thead>
									<tbody>
									<tr *ngFor="let contact of contacts; let i = index">
										<th class="text-center" scope="row">{{i + 1}}</th>
										<td>{{contact.email}}</td>
										<td>{{contact.phone_number}}</td>
										<td>{{contact.location}}</td>
										<td *ngIf="contact.is_main != null && contact.is_main == 1"
										    class="text-center"><span
												class="badge badge-pill badge-warning">Yes</span>
										</td>
										<td *ngIf="contact.is_main != null && contact.is_main == 0"
										    class="text-center"><span
												class="badge badge-pill badge-dark">No</span></td>
										<td *ngIf="contact.is_active != null && contact.is_active == 1"
										    class="text-center"><span
												class="badge badge-pill badge-success">Yes</span>
										</td>
										<td *ngIf="contact.is_active != null && contact.is_active == 0"
										    class="text-center"><span
												class="badge badge-pill badge-danger">No</span>
										</td>
										<td class="text-center">
											<a class="btn btn-info btn-xs"
											   routerLink="/profile/contacts/{{personId}}/{{contact.uuid}}"><i
													class="far fa-edit"></i></a>&nbsp;
											<a (click)="removeContact(contact.uuid)"
											   class="btn btn-danger btn-xs"><i
													class="fas fa-trash-alt text-white"></i></a>
										</td>
									</tr>
									</tbody>
								</table>
							</div>
						</div><!-- row -->
					</div><!-- col -->
				</div><!-- row -->
			</div>
		</div><!-- media -->
	</div><!-- container -->
</div><!-- content -->
