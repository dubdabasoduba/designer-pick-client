<!--
  ~ Copyright (c) 2019. The content in this file is Protected by the copyright laws of kenya and owned by Re.Kast Limited.
  ~ Reproducing it in any way or using it without permission from Re.Kast Limited will be a violation of kenyan copyrights law.
  ~ This may be subject to prosecution according to the kenyan law
  -->
<app-navigation></app-navigation>
<div class="pcoded-main-container" style="margin-top: 80px;">
	<div class="pcoded-wrapper">
		<app-sidebar></app-sidebar>
		<div class="pcoded-content">
			<div class="pcoded-inner-content">
				<div class="main-body">
					<div class="page-wrapper">
						<div class="page-body">
							<div class="row">
								<div class="col-sm-12">
									<div>
										<div class="content social-timeline">
											<div class="">
												<div class="row">
													<div class="col-md-12 search2 search-result">
														<div class="row">
															<div class="col-md-12">
																<div class="card widget-statstic-card">
																	<div class="card-header">
																		<h5
																			*ngIf="fundingId != null && fundingId != undefined"
																			class="title">
																			Edit&nbsp;|&nbsp;<b>{{fundingName}}</b></h5>
																		<h5
																			*ngIf="fundingId == null ||fundingId == undefined"
																			class="title">Add&nbsp;
																			|&nbsp;<b>Entity Funding</b></h5>
																		<span
																			*ngIf="fundingId != null && fundingId != undefined">
																			Enable the editing of the
																			{{fundingName}}&nbsp;funding
																		</span>
																		<span
																			*ngIf="fundingId == null ||fundingId == undefined">
																			Enable the addition of funding rounds
																		</span>
																		<hr/>
																	</div>
																	<div class="card-block">
																		<app-alert></app-alert>
																		<form #f="ngForm"
																		      (ngSubmit)="f.form.valid && addEditFunding()"
																		      novalidate>
																			<div class="row">
																				<div class="col-md-12">
																					<div
																						class="form-group">
																						<label class="control-label"
																						       for="fundingName">Funding
																							Name</label>
																						<input [(ngModel)]="model.name"
																						       class="form-control"
																						       data-error=""
																						       id="fundingName"
																						       name="fundingName"
																						       placeholder="Company X — Seed Capital Series A"
																						       required=""
																						       type="text"/>
																					</div>
																				</div>
																			</div>
																			<div class="row">
																				<div class="col-md-4">
																					<div
																						class="form-group label-floating">
																						<label class="control-label">Funding
																							Series </label>
																						<select
																							[(ngModel)]="model.series"
																							class="form-control col-sm-12"
																							id="series" name="series"
																							title="Type of User">
																							<option
																								label="Select Funding Series"
																								value="">
																								Select Funding Series
																							</option>
																							<option
																								*ngFor="let fundingType of series;"
																								[label]="fundingType.name"
																								[value]="fundingType._id">
																								{{fundingType.name}}
																							</option>
																						</select>
																					</div>
																				</div>
																				<div class="col-md-4">
																					<div
																						class="form-group label-floating">
																						<label class="control-label"
																						       for="dateAnnounced">Date
																							Announced</label>
																						<input
																							[(ngModel)]="model.announcement"
																							class="form-control"
																							data-error=""
																							id="dateAnnounced"
																							name="dateAnnounced"
																							required=""
																							type="date"/>
																					</div>
																				</div>
																				<div class="col-md-4">
																					<div
																						class="form-group label-floating">
																						<label class="control-label"
																						       for="fundingStatus">Funding
																							Status</label>
																						<select [(ngModel)]="model.status"
																						        class="form-control col-sm-12"
																						        id="fundingStatus"
																						        name="fundingStatus">
																							<option
																								label="Select Funding Status"
																								value="">
																								Select Funding Status
																							</option>
																							<option label="Active" value="1">
																								Active
																							</option>
																							<option label="Deactivated"
																							        value="0">
																								Deactivated
																							</option>
																						</select>
																					</div>
																				</div>
																			</div>
																			<hr/>
																			<div class="row">
																				<div class="col-md-8"></div>
																				<div class="col-md-4">
																					<button
																						*ngIf="fundingId != null && fundingId != undefined"
																						class=" form-control btn btn-primary"
																						id="editFunding"
																						type="submit"><i
																						aria-hidden="true"
																						class="fa fa-send"></i>
																						&nbsp;Update Funding&nbsp;&nbsp;
																					</button>
																					<button
																						*ngIf="fundingId == null || fundingId == undefined"
																						class="form-control btn btn-primary"
																						id="addFunding"
																						type="submit"><i aria-hidden="true"
																					                     class="fa fa-send"></i>&nbsp;Add
																						Funding&nbsp;&nbsp;
																					</button>
																				</div>
																			</div>
																		</form>
																	</div>
																</div>
															</div>
															<br/><br/>
															<div class="col-md-12">
																<div class="card widget-statstic-card">
																	<div class="card-header">
																		<h5 class="title">
																			Display&nbsp;|&nbsp;<b>{{fundingName}}&nbsp;Sponsors</b>
																		</h5>
																		<span>Displaying 1-50 of {{sponsors.length}} sponsors
																			of the {{fundingName}} funding in the african
																			technology ecosystem</span>
																	</div>
																	<div class="card-block">
																		<div class="row table-responsive">
																			<table
																				class="table table-striped table-hover table-condensed">
																				<thead>
																				<tr>
																					<th class="text-center">#</th>
																					<th>Sponsor Name</th>
																					<th>Amount Given</th>
																					<th class="text-center">Equity Given</th>
																					<th>Is Largest?</th>
																					<th class="text-right">Investment Date
																					</th>
																					<th>Actions</th>
																				</tr>
																				</thead>
																				<tbody>
																				<tr *ngIf="sponsors.length <= 0">
																					<td class="text-center" colspan="7">
																						No funding sponsors were listed
																					</td>
																				</tr>
																				<tr
																					*ngFor="let sponsor of sponsors; let i = index">
																					<td class="text-center">{{i + 1}}</td>
																					<td *ngIf="!sponsor.type">
																						<div class="search-content">
																							<img
																								class="card-img-top card-img-bottom"
																								height="20px"
																								src="{{sponsor.entityIconImage}}"
																								width="20px">&nbsp;&nbsp;
																							<a
																								class=""
																								routerLink="/entity/{{sponsor.sponsorId}}">{{sponsor.name}}</a>
																						</div>
																					</td>
																					<td *ngIf="sponsor.type">
																						<div class="search-content">
																							<img
																								class="card-img-top card-img-bottom"
																								height="20px"
																								src="{{sponsor.entityIconImage}}"
																								width="20px">&nbsp;&nbsp;
																							<a
																								class=""
																								routerLink="/person/{{sponsor.sponsorId}}">{{sponsor.name}}</a>
																						</div>
																					</td>
																					<td>&#36;{{sponsor.amount}}</td>
																					<td class="text-center">
																						{{sponsor.equity}}&#37;
																					</td>
																					<td>{{sponsor.isLargest}}</td>
																					<td class="text-right">
																						{{sponsor.investmentDate}}
																					</td>
																					<td>
																						<a
																							[queryParams]="{funding:fundingId,sponsor: sponsor.id}"
																							class="btn btn-info action-btn"
																							rel="tooltip"
																							routerLink="/edit-sponsor"
																							title="Edit Funding Sponsor"><b><i
																							class="fa fa-edit text-white"></i></b></a>
																						<button
																							(click)="removeSponsor(sponsor)"
																							class="btn btn-danger action-btn"
																							rel="tooltip"
																							title="Remove Funding Sponsor"
																							type="button">
																							<b><i
																								class="fa fa-trash-o"></i></b>
																						</button>
																					</td>
																				</tr>
																				</tbody>
																			</table>
																		</div>
																	</div>
																</div>
															</div>
															<!--<div class="col-md-12">
																<div class="user-detail-card">
																	<div class="row">
																		<div class="cd-timeline-content card_main">
																			<img src="assets/img/recover.png"
																			     class="img-fluid width-100" alt="">
																			<div class="p-20 card">
																				<div class="card-header">
																					<h5 class="card-title">Introducing
																						Re.Kast Pro</h5>
																					<hr/>
																				</div>
																				<div class="card-block">
																					<p class="text-justify">Add best-in-class
																						data to Crunchbase—a la
																						carte. From tech stack to web
																						traffic,
																						Marketplace apps enhance your
																						Crunchbase
																						research to uncover the best prospect
																						or investor for you.
																					</p>
																					<br/>
																					<button type="sumbit"
																					        class="btn btn-primary btn-md btn-block waves-effect text-center m-b-20">
																						&nbsp;Go Pro
																					</button>
																				</div>
																			</div>
																		</div>
																	</div>
																</div>
															</div>-->
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<!-- Page-body end -->
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div *ngIf="fundingId != null && fundingId != undefined">
	<a [queryParams]="{funding:fundingId}" class="float" routerLink="/add-sponsor">
		<span><img src="assets/img/sidebar/add.png"></span>
	</a>
	<div class="label-container">
		<div class="label-text">Add Sponsor</div>
		<i class="fa fa-play label-arrow"></i>
	</div>
</div>
